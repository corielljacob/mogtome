@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito:wght@400;500;600;700;800&family=Fredoka:wght@400;500;600;700&family=Caveat:wght@400;500;600;700&family=Righteous&display=swap');
@import "tailwindcss";

/* Enable class-based dark mode */
@custom-variant dark (&:where(.dark, .dark *));

/* Base Styles */
@layer base {
  html {
    scroll-behavior: smooth;
    /* Use dvh for proper mobile viewport height (accounts for browser chrome) */
    min-height: 100vh;
    min-height: 100dvh;
  }
  
  body {
    font-family: 'Nunito', 'Inter', system-ui, sans-serif;
    min-height: 100vh;
    min-height: 100dvh;
    margin: 0;
    -webkit-font-smoothing: antialiased;
    /* Prevent horizontal overflow on mobile */
    overflow-x: hidden;
    /* Enable smooth scrolling on iOS */
    -webkit-overflow-scrolling: touch;
  }

  /* Root element fills viewport properly on mobile */
  #root {
    min-height: 100vh;
    min-height: 100dvh;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Fredoka', 'Nunito', system-ui, sans-serif;
    font-weight: 600;
    color: var(--bento-text);
  }

  /* Prevent iOS Safari zoom on input focus (requires font-size >= 16px) */
  @media screen and (max-width: 768px) {
    input, select, textarea {
      font-size: 16px !important;
    }
  }

  /* Improve touch targets - minimum 44x44px for accessibility */
  @media (pointer: coarse) {
    button, 
    a, 
    [role="button"],
    input[type="checkbox"],
    input[type="radio"] {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Allow smaller inline buttons/links that are part of text */
    .inline, p a, span a {
      min-height: auto;
      min-width: auto;
    }
  }

  /* Better touch feedback */
  @media (hover: none) {
    button:active,
    a:active,
    [role="button"]:active {
      opacity: 0.8;
    }
  }

  /* Remove tap highlight on mobile */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Prevent text selection on interactive elements for better UX */
  button, a, [role="button"] {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* Design System Variables - Pom-Pom Classic Palette (Punchy) */
:root {
  --bento-bg: #FFF9F5;
  --bento-card: #FFFFFF;
  --bento-text: #3D3848;
  --bento-text-muted: #5C5670;
  --bento-text-subtle: #847E96;
  --bento-primary: #E54B4B;
  --bento-secondary: #9683B8;
  --bento-accent: #F28B8B;
  --bento-success: #6AAF6E;
  --bento-warning: #E8A830;
  --bento-border: rgba(60, 56, 72, 0.1);
  --bento-shadow: rgba(229, 75, 75, 0.18);
  --bento-glass: rgba(255, 255, 255, 0.92);
}

.dark {
  --bento-bg: #1A1722;
  --bento-card: rgba(30, 26, 38, 0.96);
  --bento-text: #F0ECF5;
  --bento-text-muted: #C4BED2;
  --bento-text-subtle: #9690A6;
  --bento-primary: #F06060;
  --bento-secondary: #B8A4D8;
  --bento-accent: #F8A0A0;
  --bento-success: #7FC083;
  --bento-warning: #F0B840;
  --bento-border: rgba(240, 236, 245, 0.1);
  --bento-shadow: rgba(240, 96, 96, 0.22);
  --bento-glass: rgba(30, 26, 38, 0.94);
}

/* Typography */
.font-inter { font-family: 'Inter', system-ui, sans-serif; }
.font-display { font-family: 'Fredoka', 'Nunito', system-ui, sans-serif; }
.font-number { font-family: 'Righteous', 'Fredoka', system-ui, sans-serif; }
.font-accent { font-family: 'Caveat', cursive; }
.font-soft { font-family: 'Nunito', system-ui, sans-serif; }
.font-title { font-family: 'Fredoka', 'Nunito', system-ui, sans-serif; }

/* Safe area insets for notched devices (iPhone X+, etc.) */
:root {
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

/* iOS Safari: Edge-to-edge design - background extends behind status bar & home indicator */
@supports (padding: env(safe-area-inset-top)) {
  /* Background extends to full screen edges - no padding on html/body */
  html {
    background: var(--bento-bg);
  }
  
  .dark html,
  html:has(.dark) {
    background: #1A1722;
  }
}

/* Background - Pom-Pom Classic (Richer) */
.bento-bg-mesh {
  background: 
    radial-gradient(ellipse at 0% 0%, rgba(150, 131, 184, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 0%, rgba(242, 139, 139, 0.18) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 100%, rgba(229, 75, 75, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 0% 100%, rgba(150, 131, 184, 0.12) 0%, transparent 50%),
    var(--bento-bg);
  /* Use fixed attachment only on desktop - it's very slow on mobile */
  background-attachment: scroll;
}

/* Enable fixed background only on devices with fine pointer (desktop/laptop) */
@media (pointer: fine) {
  .bento-bg-mesh {
    background-attachment: fixed;
  }
}

.dark .bento-bg-mesh {
  background: 
    radial-gradient(ellipse at 0% 0%, rgba(184, 164, 216, 0.12) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 0%, rgba(240, 96, 96, 0.14) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 100%, rgba(184, 164, 216, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 0% 100%, rgba(240, 96, 96, 0.08) 0%, transparent 50%),
    var(--bento-bg);
  background-attachment: scroll;
}

@media (pointer: fine) {
  .dark .bento-bg-mesh {
    background-attachment: fixed;
  }
}

/* Glass Card - Premium glass morphism */
@layer components {
  .bento-glass {
    background: var(--bento-glass);
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 1.5rem;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }
  
  /* Only enable backdrop blur on desktop - it's expensive on mobile */
  @media (pointer: fine) {
    .bento-glass {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
  }

  .dark .bento-glass {
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
  
  /* Award-winning glass card - mobile optimized */
  .glass-card {
    background: rgba(255, 255, 255, 0.85);
    border: 0.5px solid rgba(255, 255, 255, 0.6);
    border-radius: 1rem;
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.04),
      0 4px 12px rgba(0, 0, 0, 0.02),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }
  
  .dark .glass-card {
    background: rgba(30, 26, 38, 0.85);
    border: 0.5px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 1px 3px rgba(0, 0, 0, 0.2),
      0 4px 12px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }
  
  /* Frosted glass header - premium blur effect */
  .glass-header {
    background: rgba(255, 249, 245, 0.92);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    backdrop-filter: saturate(180%) blur(20px);
  }
  
  .dark .glass-header {
    background: rgba(26, 23, 34, 0.92);
  }
  
  /* Floating card with depth */
  .floating-card {
    background: var(--bento-card);
    border-radius: 1.25rem;
    box-shadow: 
      0 0 0 1px rgba(0, 0, 0, 0.03),
      0 2px 4px rgba(0, 0, 0, 0.02),
      0 4px 8px rgba(0, 0, 0, 0.02),
      0 8px 16px rgba(0, 0, 0, 0.02),
      0 16px 32px rgba(0, 0, 0, 0.02);
  }
  
  .dark .floating-card {
    box-shadow: 
      0 0 0 1px rgba(255, 255, 255, 0.05),
      0 2px 4px rgba(0, 0, 0, 0.1),
      0 4px 8px rgba(0, 0, 0, 0.1),
      0 8px 16px rgba(0, 0, 0, 0.1),
      0 16px 32px rgba(0, 0, 0, 0.15);
  }
}

/* Shimmer Animation */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(200%); }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * PERFORMANCE: CSS Animations for decorative floating elements
 * These run on the compositor thread, avoiding main thread work.
 * 
 * Mobile optimization: On touch devices, we use simpler transform-only 
 * animations (no opacity changes) for better performance on Android.
 * ───────────────────────────────────────────────────────────────────────────── */

/* Mobile-optimized: transform only, no opacity animation */
@keyframes float-moogle-simple {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}

/* Desktop: full animation with opacity */
@keyframes float-moogle {
  0%, 100% { 
    opacity: var(--float-opacity-min, 0.15);
    transform: translateY(0);
  }
  50% { 
    opacity: var(--float-opacity-max, 0.25);
    transform: translateY(-15px);
  }
}

.animate-float-moogle {
  /* Start with static opacity for mobile */
  opacity: var(--float-opacity-min, 0.15);
  animation: float-moogle-simple 5s ease-in-out infinite;
  animation-fill-mode: both;
}

/* Enable full opacity animation on desktop only */
@media (pointer: fine) {
  .animate-float-moogle {
    animation-name: float-moogle;
  }
}

/* Mobile-optimized subtle variant */
@keyframes float-moogle-subtle-simple {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* Desktop: full subtle animation with opacity */
@keyframes float-moogle-subtle {
  0%, 100% { 
    opacity: var(--float-opacity-min, 0.06);
    transform: translateY(0);
  }
  50% { 
    opacity: var(--float-opacity-max, 0.12);
    transform: translateY(-12px);
  }
}

.animate-float-moogle-subtle {
  /* Start with static opacity for mobile */
  opacity: var(--float-opacity-min, 0.06);
  animation: float-moogle-subtle-simple 5s ease-in-out infinite;
  animation-fill-mode: both;
}

/* Enable full opacity animation on desktop only */
@media (pointer: fine) {
  .animate-float-moogle-subtle {
    animation-name: float-moogle-subtle;
  }
}

/* Mobile-optimized sparkle: simpler animation */
@keyframes float-sparkle-simple {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-8px) scale(1.1); }
}

/* Desktop: full sparkle animation */
@keyframes float-sparkle {
  0%, 100% { 
    opacity: 0.4;
    transform: translateY(0) scale(0.9) rotate(0deg);
  }
  50% { 
    opacity: 0.8;
    transform: translateY(-10px) scale(1.1) rotate(10deg);
  }
}

.animate-float-sparkle {
  /* Start with static opacity for mobile */
  opacity: 0.5;
  animation: float-sparkle-simple 3s ease-in-out infinite;
  animation-fill-mode: both;
}

/* Enable full opacity animation on desktop only */
@media (pointer: fine) {
  .animate-float-sparkle {
    animation-name: float-sparkle;
  }
}

/* Slow ping animation for status indicators */
@keyframes ping-slow {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}

.animate-ping-slow {
  animation: ping-slow 2s ease-in-out infinite;
}

/* Respect user's reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .animate-float-moogle,
  .animate-float-moogle-subtle,
  .animate-float-sparkle,
  .animate-shimmer,
  .animate-ping-slow,
  .animate-pulse,
  .animate-spin {
    animation: none;
    opacity: var(--float-opacity-max, 0.2);
  }
  
  /* Keep visibility for status indicators */
  .animate-ping-slow {
    opacity: 1;
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * MOBILE NAV SPACING
 * Bottom padding for pages when mobile nav is visible
 * ───────────────────────────────────────────────────────────────────────────── */

/* Mobile nav height: ~52px content + safe area (enhanced height for premium feel) */
.pb-mobile-nav {
  padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px));
}

@media (min-width: 768px) {
  .pb-mobile-nav {
    padding-bottom: 0;
  }
}

/* Mobile nav backdrop area - smooth transition zone */
.mobile-nav-fade {
  background: linear-gradient(
    to top,
    var(--bento-bg) 0%,
    rgba(var(--bento-bg-rgb), 0.95) 40%,
    transparent 100%
  );
  pointer-events: none;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * MOBILE-NATIVE ENHANCEMENTS
 * Styles that make the app feel more like a native mobile app
 * ───────────────────────────────────────────────────────────────────────────── */

@layer base {
  /* 
   * RUBBER BAND / BOUNCE SCROLLING
   * 
   * iOS Safari: Has native elastic bounce by default - we preserve this!
   * Chrome/Android: Has pull-to-refresh which we want to control ourselves
   * 
   * Solution: Only disable overscroll on Android/Chrome, keep iOS bounce
   */
  
  html {
    /* Allow natural overscroll bounce on iOS */
    overscroll-behavior: auto;
  }
  
  body {
    /* Prevent text selection on long press for interactive elements */
    -webkit-touch-callout: none;
    /* Smooth momentum scrolling on iOS - this is key for the native feel! */
    -webkit-overflow-scrolling: touch;
    /* Keep natural overscroll behavior */
    overscroll-behavior: auto;
  }
  
  /* 
   * Only disable overscroll bounce in standalone PWA mode on Android
   * This prevents the ugly Chrome reload gesture, but iOS keeps its bounce
   */
  @media (display-mode: standalone) {
    /* Remove any browser-specific UI gaps */
    html, body, #root {
      height: 100%;
    }
    
    /* Ensure content fills the screen edge-to-edge */
    body {
      margin: 0;
      padding: 0;
    }
    
    /* 
     * On Android PWA, contain overscroll to prevent accidental navigation
     * iOS ignores this and keeps its native bounce (which is what we want!)
     */
    @supports not (-webkit-touch-callout: none) {
      /* This targets non-iOS devices (Android, etc.) */
      body {
        overscroll-behavior-y: contain;
      }
    }
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * PULL-TO-REFRESH INDICATOR
 * Custom styling for the pull-to-refresh component
 * ───────────────────────────────────────────────────────────────────────────── */

.pull-to-refresh-indicator {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  padding: calc(env(safe-area-inset-top, 0px) + 0.5rem) 1rem 0.5rem;
  pointer-events: none;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * TOUCH INTERACTIONS
 * Enhanced touch feedback for a native feel
 * ───────────────────────────────────────────────────────────────────────────── */

@layer base {
  /* Active state for all interactive elements on touch devices */
  @media (pointer: coarse) {
    /* Cards and list items */
    .touch-feedback {
      transition: transform 100ms ease-out, opacity 100ms ease-out;
    }
    
    .touch-feedback:active {
      transform: scale(0.98);
      opacity: 0.9;
    }
    
    /* Subtle press feedback for buttons */
    button:not(:disabled):active,
    [role="button"]:not(:disabled):active {
      transform: scale(0.97);
    }
    
    /* Remove hover effects on touch - they can feel sticky */
    .no-touch-hover:hover {
      /* Reset hover styles */
    }
  }
  
  /* Smooth transitions for touch interactions */
  .touch-transition {
    transition: transform 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * SCROLLBAR HIDING FOR MOBILE
 * Hide scrollbars on mobile for cleaner look, keep on desktop
 * ───────────────────────────────────────────────────────────────────────────── */

@media (pointer: coarse) {
  /* Hide scrollbars on touch devices */
  .hide-scrollbar-mobile::-webkit-scrollbar {
    display: none;
  }
  
  .hide-scrollbar-mobile {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Utility to hide scrollbar everywhere */
.scrollbar-none::-webkit-scrollbar {
  display: none;
}
.scrollbar-none {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Touch feedback for mobile - subtle scale on press */
@media (pointer: coarse) {
  .touch-feedback {
    -webkit-tap-highlight-color: transparent;
  }
  
  .touch-feedback:active {
    transform: scale(0.98);
    opacity: 0.95;
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * SMOOTH MOMENTUM SCROLLING
 * Make all scrollable areas feel buttery smooth like native apps
 * ───────────────────────────────────────────────────────────────────────────── */

/* Apply momentum scrolling to any scrollable container */
.momentum-scroll,
[data-scroll="true"] {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Horizontal scroll containers (like carousels) */
.scroll-x-smooth {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  /* Hide scrollbar but keep functionality */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scroll-x-smooth::-webkit-scrollbar {
  display: none;
}

/* Scroll snap for items in horizontal scroll */
.scroll-snap-start {
  scroll-snap-align: start;
}

.scroll-snap-center {
  scroll-snap-align: center;
}

/* Vertical scroll with bounce */
.scroll-y-bounce {
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: auto; /* Allow bounce */
}

/* ─────────────────────────────────────────────────────────────────────────────
 * SKELETON LOADING STATES
 * Smooth loading states for content
 * ───────────────────────────────────────────────────────────────────────────── */

@keyframes skeleton-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--bento-bg) 0%,
    var(--bento-card) 50%,
    var(--bento-bg) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite linear;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * NATIVE APP-LIKE ENHANCEMENTS
 * Extra polish for making the PWA feel like a native app
 * ───────────────────────────────────────────────────────────────────────────── */

@layer base {
  /* iOS-style sticky headers with blur */
  .sticky-header-blur {
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    backdrop-filter: saturate(180%) blur(20px);
  }
  
  /* Disable on mobile for performance */
  @media (pointer: coarse) {
    .sticky-header-blur {
      -webkit-backdrop-filter: none;
      backdrop-filter: none;
      background-color: var(--bento-bg);
    }
  }
}

/* Native-style press states */
@media (pointer: coarse) {
  /* Card press effect - iOS style */
  .native-press {
    transition: transform 60ms ease-out, opacity 60ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    will-change: transform;
  }
  
  .native-press:active {
    transform: scale(0.97);
    opacity: 0.9;
  }
  
  /* Button press - snappy spring-like feel */
  .native-button-press {
    transition: transform 50ms ease-out, filter 50ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    will-change: transform;
  }
  
  .native-button-press:active {
    transform: scale(0.95);
    filter: brightness(0.92);
  }
  
  /* Subtle list item press - iOS highlight style */
  .native-list-press {
    transition: background-color 80ms ease-out;
    -webkit-tap-highlight-color: transparent;
  }
  
  .native-list-press:active {
    background-color: var(--bento-primary-10, rgba(229, 75, 75, 0.08));
  }
  
  /* iOS-style row highlight */
  .native-row {
    transition: background-color 60ms ease-out;
    -webkit-tap-highlight-color: transparent;
  }
  
  .native-row:active {
    background-color: rgba(0, 0, 0, 0.04);
  }
  
  .dark .native-row:active {
    background-color: rgba(255, 255, 255, 0.04);
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * SPRING-LIKE BUTTON ANIMATIONS
 * Makes buttons feel bouncy and responsive like native iOS/Android
 * ───────────────────────────────────────────────────────────────────────────── */

@media (pointer: coarse) {
  /* Primary CTA buttons - bouncy press with glow */
  .btn-spring {
    transition: transform 100ms cubic-bezier(0.34, 1.56, 0.64, 1), 
                box-shadow 100ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    will-change: transform;
  }
  
  .btn-spring:active {
    transform: scale(0.94);
    transition: transform 60ms ease-out;
    box-shadow: 0 0 0 4px rgba(229, 75, 75, 0.15);
  }
  
  /* Icon buttons - quick tap response */
  .btn-icon {
    transition: transform 80ms ease-out, opacity 80ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  .btn-icon:active {
    transform: scale(0.85);
    opacity: 0.7;
  }
  
  /* Chip/tag buttons - subtle feedback */
  .btn-chip {
    transition: transform 60ms ease-out, background-color 60ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  .btn-chip:active {
    transform: scale(0.96);
  }
  
  /* Floating action button - 3D press effect */
  .btn-fab {
    transition: transform 120ms cubic-bezier(0.34, 1.56, 0.64, 1),
                box-shadow 120ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  .btn-fab:active {
    transform: scale(0.92) translateY(2px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * AWARD-WINNING MOBILE MICRO-INTERACTIONS
 * Premium animations that make the app feel cutting-edge
 * ───────────────────────────────────────────────────────────────────────────── */

/* Staggered fade-in for list items */
@keyframes stagger-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stagger-item {
  animation: stagger-in 0.3s ease-out forwards;
  opacity: 0;
}

/* CSS custom property for stagger delay */
.stagger-item:nth-child(1) { animation-delay: 0ms; }
.stagger-item:nth-child(2) { animation-delay: 30ms; }
.stagger-item:nth-child(3) { animation-delay: 60ms; }
.stagger-item:nth-child(4) { animation-delay: 90ms; }
.stagger-item:nth-child(5) { animation-delay: 120ms; }
.stagger-item:nth-child(6) { animation-delay: 150ms; }
.stagger-item:nth-child(n+7) { animation-delay: 180ms; }

/* Premium card hover/press state */
@media (pointer: coarse) {
  .card-press {
    transition: transform 100ms cubic-bezier(0.25, 0.46, 0.45, 0.94),
                box-shadow 100ms ease-out,
                background-color 80ms ease-out;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  .card-press:active {
    transform: scale(0.97);
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
  }
}

/* Smooth reveal animation for images */
@keyframes image-reveal {
  from {
    opacity: 0;
    transform: scale(1.02);
    filter: blur(4px);
  }
  to {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

.image-reveal {
  animation: image-reveal 0.4s ease-out forwards;
}

/* Pulse glow for active/live indicators */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(229, 75, 75, 0.4);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(229, 75, 75, 0);
  }
}

.pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Premium shimmer for loading states */
@keyframes premium-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.premium-shimmer {
  background: linear-gradient(
    90deg,
    var(--bento-bg) 0%,
    var(--bento-card) 25%,
    rgba(229, 75, 75, 0.05) 50%,
    var(--bento-card) 75%,
    var(--bento-bg) 100%
  );
  background-size: 200% 100%;
  animation: premium-shimmer 1.8s ease-in-out infinite;
}

/* Elastic bounce for success states */
@keyframes elastic-bounce {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.98);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.elastic-bounce {
  animation: elastic-bounce 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Smooth content fade for transitions */
@keyframes content-fade {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.content-fade {
  animation: content-fade 0.25s ease-out forwards;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * IMPROVED FOCUS STATES FOR ACCESSIBILITY
 * Clear focus indicators that don't look jarring on mobile
 * ───────────────────────────────────────────────────────────────────────────── */

@layer base {
  /* Custom focus ring that matches the theme */
  *:focus-visible {
    outline: 2px solid var(--bento-primary);
    outline-offset: 2px;
    border-radius: inherit;
  }
  
  /* Remove focus ring on touch devices for cleaner UX */
  @media (pointer: coarse) {
    *:focus-visible {
      outline: none;
    }
    
    /* Keep focus ring for keyboard navigation (if user switches) */
    .keyboard-user *:focus-visible {
      outline: 2px solid var(--bento-primary);
      outline-offset: 2px;
    }
  }
}

/* iOS-style separator line */
.native-separator {
  height: 0.5px;
  background: var(--bento-border);
  margin-left: 1rem;
}

/* Full bleed separator */
.native-separator-full {
  height: 0.5px;
  background: var(--bento-border);
}

/* iOS-style grouped list container */
.native-grouped-list {
  background: var(--bento-card);
  border-radius: 0.75rem;
  overflow: hidden;
}

/* Native-style large title that collapses on scroll */
.native-large-title {
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.1;
  transition: all 200ms ease-out;
}

.native-large-title.collapsed {
  font-size: 1.125rem;
  opacity: 0;
  height: 0;
  margin: 0;
  overflow: hidden;
}

/* Smooth pan gesture hint */
.pan-x {
  touch-action: pan-x;
}

.pan-y {
  touch-action: pan-y;
}

/* Disable text selection on interactive surfaces */
.no-select {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Safe area padding utilities */
.safe-top {
  padding-top: env(safe-area-inset-top, 0px);
}

.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.safe-left {
  padding-left: env(safe-area-inset-left, 0px);
}

.safe-right {
  padding-right: env(safe-area-inset-right, 0px);
}

.safe-x {
  padding-left: env(safe-area-inset-left, 0px);
  padding-right: env(safe-area-inset-right, 0px);
}

.safe-y {
  padding-top: env(safe-area-inset-top, 0px);
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* iOS-style inset grouped list margins */
@media (max-width: 640px) {
  .inset-grouped {
    margin-left: 1rem;
    margin-right: 1rem;
    border-radius: 0.75rem;
    overflow: hidden;
  }
}

/* Radial gradient for hero sections */
.bg-gradient-radial {
  background: radial-gradient(circle at center, var(--tw-gradient-stops));
}

/* ─────────────────────────────────────────────────────────────────────────────
 * MOBILE-SPECIFIC TYPOGRAPHY
 * iOS/Android-style text rendering
 * ───────────────────────────────────────────────────────────────────────────── */

/* iOS uses SF Pro with -0.4 tracking for body, we'll approximate */
@media (max-width: 768px) {
  body {
    font-size: 17px; /* iOS default body size */
    line-height: 1.47; /* iOS body line height: 22/15 */
    letter-spacing: -0.01em;
  }
  
  /* Navigation bar title - 17pt semibold */
  .mobile-nav-title {
    font-size: 17px;
    font-weight: 600;
    letter-spacing: -0.01em;
  }
  
  /* Large title - 34pt bold (iOS large title) */
  .mobile-title-large {
    font-size: 34px;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: 0.01em;
  }
  
  /* Section header - 13pt all caps */
  .mobile-section-header {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    color: var(--bento-text-muted);
  }
  
  /* Body text - 15pt */
  .mobile-body {
    font-size: 15px;
    line-height: 1.4;
    letter-spacing: -0.01em;
  }
  
  /* Caption - 12pt */
  .mobile-caption {
    font-size: 12px;
    line-height: 1.33;
    color: var(--bento-text-muted);
  }
  
  /* Footnote - 13pt */
  .mobile-footnote {
    font-size: 13px;
    line-height: 1.38;
    color: var(--bento-text-muted);
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * NATIVE CARD STYLES
 * iOS/Android-style cards - clean, minimal, focused on content
 * ───────────────────────────────────────────────────────────────────────────── */

.native-card {
  background: var(--bento-card);
  border-radius: 12px;
  border: 0.5px solid var(--bento-border);
}

/* iOS-style grouped list card */
.native-grouped-card {
  background: var(--bento-card);
  border-radius: 10px;
  overflow: hidden;
}

/* Elevated card - for modals, popovers */
.native-card-elevated {
  background: var(--bento-card);
  border-radius: 14px;
  box-shadow: 
    0 0 0 0.5px rgba(0, 0, 0, 0.04),
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 8px 24px rgba(0, 0, 0, 0.06);
}

.dark .native-card-elevated {
  box-shadow: 
    0 0 0 0.5px rgba(255, 255, 255, 0.05),
    0 2px 8px rgba(0, 0, 0, 0.3),
    0 8px 24px rgba(0, 0, 0, 0.25);
}

/* iOS-style inset grouped list row */
.native-list-row {
  display: flex;
  align-items: center;
  padding: 11px 16px;
  background: var(--bento-card);
  min-height: 44px;
}

.native-list-row:active {
  background: var(--bento-bg);
}

/* Separator for list rows */
.native-list-row + .native-list-row {
  border-top: 0.5px solid var(--bento-border);
  margin-left: 16px;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * LOADING STATES
 * Native-style loading indicators
 * ───────────────────────────────────────────────────────────────────────────── */

/* iOS-style spinner */
@keyframes spin-ios {
  to {
    transform: rotate(360deg);
  }
}

.spinner-ios {
  width: 20px;
  height: 20px;
  border: 2px solid var(--bento-border);
  border-top-color: var(--bento-primary);
  border-radius: 50%;
  animation: spin-ios 0.8s linear infinite;
}

.spinner-ios-sm {
  width: 16px;
  height: 16px;
  border-width: 1.5px;
}

.spinner-ios-lg {
  width: 28px;
  height: 28px;
  border-width: 2.5px;
}

/* Skeleton pulse - smoother than shimmer for mobile */
@keyframes skeleton-native {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

.skeleton-native {
  background: linear-gradient(
    110deg,
    var(--bento-bg) 0%,
    var(--bento-card) 40%,
    var(--bento-bg) 100%
  );
  animation: skeleton-native 1.2s ease-in-out infinite;
}

/* ─────────────────────────────────────────────────────────────────────────────
 * BOTTOM SHEET / MODAL STYLES
 * Native-style sheet presentations
 * ───────────────────────────────────────────────────────────────────────────── */

.sheet-handle {
  width: 36px;
  height: 5px;
  background: var(--bento-text-subtle);
  border-radius: 2.5px;
  opacity: 0.3;
  margin: 8px auto 0;
}

.sheet-backdrop {
  background: rgba(0, 0, 0, 0.3);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
}

.dark .sheet-backdrop {
  background: rgba(0, 0, 0, 0.5);
}

/* ─────────────────────────────────────────────────────────────────────────────
 * GESTURE HINTS
 * Visual cues that indicate swipeable/interactive elements
 * ───────────────────────────────────────────────────────────────────────────── */

/* Subtle bounce hint for scrollable areas */
@keyframes bounce-hint {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.scroll-hint {
  animation: bounce-hint 2s ease-in-out 3;
}

/* Edge fade for horizontal scroll containers */
.scroll-edge-fade {
  -webkit-mask-image: linear-gradient(
    to right,
    transparent 0%,
    black 5%,
    black 95%,
    transparent 100%
  );
  mask-image: linear-gradient(
    to right,
    transparent 0%,
    black 5%,
    black 95%,
    transparent 100%
  );
}

/* ─────────────────────────────────────────────────────────────────────────────
 * STANDALONE PWA MODE ENHANCEMENTS
 * Additional styles when running as installed PWA
 * ───────────────────────────────────────────────────────────────────────────── */

@media (display-mode: standalone) {
  /* Remove any browser-specific visual gaps */
  body {
    /* Prevent rubber banding at page edges on iOS */
    position: fixed;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  
  /* Make the root scrollable instead */
  #root {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Ensure safe area coverage */
  .pwa-safe-area {
    padding-top: env(safe-area-inset-top, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
 * HIGH-CONTRAST MODE SUPPORT
 * Accessibility improvements for users with high contrast preferences
 * ───────────────────────────────────────────────────────────────────────────── */

@media (prefers-contrast: high) {
  :root {
    --bento-border: rgba(0, 0, 0, 0.25);
  }
  
  .dark {
    --bento-border: rgba(255, 255, 255, 0.25);
  }
  
  /* Stronger focus indicators */
  *:focus-visible {
    outline-width: 3px;
  }
}
